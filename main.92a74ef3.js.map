{"version":3,"sources":["scripts/main.js"],"names":["NOTIFICATIONS","shortName","title","description","type","shortPosition","noOfficeSelected","lowAge","tooOld","wrongSalary","success","CITIES","tokyo","singapore","london","newyork","edinburgh","sanfrancisco","body","document","querySelector","table","tHead","tBody","tr","querySelectorAll","form","createElement","button","createForm","classList","add","action","method","selectCity","city","insertAdjacentHTML","innerText","append","el","tagName","dataset","qa","name","required","tableSort","asc","addEventListener","headClickHandler","e","th","target","closest","contains","sortedList","indexCell","sorted","sort","a","b","sortA","cells","replace","sortB","isNaN","localeCompare","cellIndex","RowSelecting","selectRow","rows","map","remove","parentNode","addEmployeeAppending","pushNotification","notificationBlock","h2","p","notifications","length","setTimeout","submitForm","preventDefault","newForm","employee","validateForm","value","position","office","age","salary","toLocaleString","reset","addTableEditing","saveValue","td","input","defaultValue","headName","textContent","toString","handleCellEditing","oldData","innerHTML","style","width","window","getComputedStyle","focus","ev","code"],"mappings":"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","file":"main.92a74ef3.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n// write code here\nconst NOTIFICATIONS = {\n  shortName: {\n    title: 'Warning!',\n    description: 'Name value has less than 4 letters',\n    type: 'warning',\n  },\n  shortPosition: {\n    title: 'Warning!',\n    description: 'Name value has less than 4 letters',\n    type: 'warning',\n  },\n  noOfficeSelected: {\n    title: 'Warning!',\n    description: 'Name value has less than 4 letters',\n    type: 'warning',\n  },\n  lowAge: {\n    title: 'Warning!',\n    description: `Age can't be less then 18`,\n    type: 'warning',\n  },\n  tooOld: {\n    title: 'Warning!',\n    description: `Age can't be greater then 90`,\n    type: 'warning',\n  },\n  wrongSalary: {\n    title: 'Error!',\n    description: 'Incorrect salary value',\n    type: 'error',\n  },\n  success: {\n    title: 'Successfully added',\n    description: 'New employee successfully added to the table',\n    type: 'success',\n  },\n};\n\nconst CITIES = {\n  tokyo: 'Tokyo',\n  singapore: 'Singapore',\n  london: 'London',\n  newyork: 'New York',\n  edinburgh: 'Edinburgh',\n  sanfrancisco: 'San Francisco',\n};\n\nconst body = document.querySelector('body');\nconst table = document.querySelector('table');\nconst tHead = document.querySelector('thead');\nconst tBody = document.querySelector('tbody');\nlet tr = [...tBody.querySelectorAll('tr')];\nconst form = document.createElement('form');\nconst button = document.createElement('button');\n\ncreateForm();\ntableSort();\nRowSelecting();\naddEmployeeAppending();\naddTableEditing();\n\nfunction createForm() {\n  form.classList.add('new-employee-form');\n  form.action = '/';\n  form.method = 'GET';\n\n  let selectCity = '';\n\n  for (const city in CITIES) {\n    selectCity += `\n      <option value=\"${CITIES[city]}\">${CITIES[city]}</option>\n    `;\n  }\n\n  form.insertAdjacentHTML('afterbegin', `\n    <label>Name:\n      <input\n        name=\"name\"\n        type=\"text\"\n      >\n    </label>\n    <label>Position:\n      <input\n        name=\"position\"\n        type=\"text\"\n      >\n    </label>\n    <label>Office:\n      <select\n        name=\"office\"\n      >\n        ${selectCity}\n      </select>\n    </label>\n    <label>Age:\n      <input\n        name=\"age\"\n        type=\"number\"\n      >\n    </label>\n    <label>Salary:\n      <input\n        name=\"salary\"\n        type=\"number\"\n      >\n    </label>\n  `);\n\n  button.innerText = 'Save to table';\n  button.type = 'submit';\n  form.append(button);\n\n  for (const el of form) {\n    if (el.tagName === 'INPUT' || el.tagName === 'SELECT') {\n      el.dataset.qa = el.name;\n      el.required = true;\n    }\n  }\n\n  body.append(form);\n}\n\nfunction tableSort() {\n  let asc = false;\n\n  tHead.addEventListener('click', headClickHandler);\n\n  function headClickHandler(e) {\n    const th = e.target.closest('th');\n\n    if (!th || !tHead.contains(th)) {\n      return;\n    }\n\n    asc = !asc;\n\n    const indexCell = e.target.cellIndex;\n\n    sortedList(indexCell);\n  }\n\n  function sortedList(indexCell) {\n    const sorted = tr.sort((a, b) => {\n      const sortA = a.cells[indexCell].innerText.replace(/\\$|,/g, '');\n      const sortB = b.cells[indexCell].innerText.replace(/\\$|,/g, '');\n\n      if (asc) {\n        if (isNaN(sortA)) {\n          return sortA.localeCompare(sortB);\n        } else {\n          return sortA - sortB;\n        }\n      } else {\n        if (isNaN(sortB)) {\n          return sortB.localeCompare(sortA);\n        } else {\n          return sortB - sortA;\n        }\n      }\n    });\n\n    tBody.append(...sorted);\n  }\n}\n\nfunction RowSelecting() {\n  tBody.addEventListener('click', selectRow);\n\n  function selectRow(e) {\n    [...tBody.rows].map(el => el.classList.remove('active'));\n    e.target.parentNode.classList.add('active');\n  }\n}\n\nfunction addEmployeeAppending() {\n  function pushNotification(title, description, type) {\n    const notificationBlock = document.createElement('div');\n    const h2 = document.createElement('h2');\n    const p = document.createElement('p');\n    const notifications = document.querySelectorAll('.notification');\n\n    if (notifications.length > 0) {\n      notifications[0].remove();\n    }\n\n    notificationBlock.classList.add('notification', type);\n    h2.classList.add('title');\n    h2.innerText = title;\n    p.innerText = description;\n    notificationBlock.append(h2, p);\n    body.append(notificationBlock);\n\n    setTimeout(() => notificationBlock.remove(), 3000);\n  }\n\n  function validateForm() {\n    switch (true) {\n      case (form.name.value.length < 3):\n        pushNotification(\n          NOTIFICATIONS.shortName.title,\n          NOTIFICATIONS.shortName.description,\n          NOTIFICATIONS.shortName.type\n        );\n\n        return false;\n      case (form.position.value.length < 4 || !isNaN(+form.position.value)):\n        pushNotification(\n          NOTIFICATIONS.shortPosition.title,\n          NOTIFICATIONS.shortPosition.description,\n          NOTIFICATIONS.shortPosition.type\n        );\n\n        return false;\n      case (!form.office.value):\n        pushNotification(\n          NOTIFICATIONS.noOfficeSelected.title,\n          NOTIFICATIONS.noOfficeSelected.description,\n          NOTIFICATIONS.noOfficeSelected.type\n        );\n\n        return false;\n      case (form.age.value < 18):\n        pushNotification(\n          NOTIFICATIONS.lowAge.title,\n          NOTIFICATIONS.lowAge.description,\n          NOTIFICATIONS.lowAge.type\n        );\n\n        return false;\n      case (form.age.value > 90):\n        pushNotification(\n          NOTIFICATIONS.tooOld.title,\n          NOTIFICATIONS.tooOld.description,\n          NOTIFICATIONS.tooOld.type\n        );\n\n        return false;\n      case (+form.salary.value === 0):\n        pushNotification(\n          NOTIFICATIONS.wrongSalary.title,\n          NOTIFICATIONS.wrongSalary.description,\n          NOTIFICATIONS.wrongSalary.type\n        );\n\n        return false;\n      default:\n        pushNotification(\n          NOTIFICATIONS.success.title,\n          NOTIFICATIONS.success.description,\n          NOTIFICATIONS.success.type\n        );\n\n        return true;\n    }\n  }\n\n  function addNewEmployee() {\n    const employee = document.createElement('tr');\n\n    employee.insertAdjacentHTML('afterbegin', `\n    <td>${form.name.value}</td>\n    <td>${form.position.value}</td>\n    <td>${form.office.value}</td>\n    <td>${form.age.value}</td>\n    <td>$${(+form.salary.value).toLocaleString('en-US')}</td>\n  `);\n    tBody.append(employee);\n    tr = [...tBody.querySelectorAll('tr')];\n  }\n\n  function submitForm(e) {\n    e.preventDefault();\n\n    const newForm = e.target;\n\n    if (!validateForm(newForm)) {\n      return;\n    }\n\n    addNewEmployee(newForm);\n    newForm.reset();\n  }\n  form.addEventListener('submit', submitForm);\n}\n\nfunction addTableEditing() {\n  function saveValue(td, input, defaultValue, headName) {\n    switch (true) {\n      case !input.value:\n      case defaultValue.length === 2 && isNaN(+input.value):\n      case defaultValue.length === 2\n        && (+input.value < 18 || +input.value > 90):\n      case isNaN(+defaultValue.replace(/(^\\$)|,/g, ''))\n      && input.value.length < 4:\n      case !isNaN(+defaultValue.replace(/(^\\$)|,/g, ''))\n      && isNaN(+input.value.replace(/(^\\$)|,/g, '')):\n      case isNaN(+defaultValue.replace(/(^\\$)|,/g, ''))\n      && !isNaN(+input.value.replace(/(^\\$)|,/g, '')):\n        td.textContent = defaultValue;\n        break;\n      case (headName === 'Salary'):\n        td.textContent = input.value.toString()\n          .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n        break;\n\n      default:\n        td.textContent = input.value;\n    }\n  }\n\n  function handleCellEditing(e) {\n    const td = e.target;\n    const defaultValue = td.textContent;\n    const headName = table.rows[0].cells[td.cellIndex].textContent;\n\n    let oldData;\n    let input;\n\n    if (headName === 'Office') {\n      input = document.createElement('select');\n\n      oldData = td.innerHTML;\n      td.innerHTML = '';\n\n      input.insertAdjacentHTML('afterbegin', `\n      <select data-qa=\"office\" name=\"office\">\n        <option value = \"Tokyo\">Tokyo</option>\n        <option value = \"Singapore\">Singapore</option>\n        <option value = \"London\">London</option>\n        <option value = \"New York\">New York</option>\n        <option value = \"Edinburgh\">Edinburgh</option>\n        <option value = \"San Francisco\">San Francisco</option>\n      </select>\n    `);\n      input.style.width = window.getComputedStyle(e.target).width;\n      input.classList.add('cell-input');\n      input.value = oldData;\n      td.append(input);\n      input.focus();\n    } else {\n      input = document.createElement('input');\n\n      input.style.width = window.getComputedStyle(e.target).width;\n      oldData = td.innerHTML;\n      input.classList.add('cell-input');\n      td.innerHTML = '';\n      input.value = oldData;\n      td.append(input);\n      input.focus();\n    }\n\n    input.addEventListener('blur', () =>\n      saveValue(td, input, defaultValue, headName));\n\n    input.addEventListener('keydown', (ev) => {\n      if (ev.code === 'Enter') {\n        saveValue(td, input, defaultValue, headName);\n      }\n    });\n  }\n  tBody.addEventListener('dblclick', handleCellEditing);\n}\n"]}